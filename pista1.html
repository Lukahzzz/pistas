<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protocolo de Iniciación - Aranzza</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />

    <style>
        :root {
            --color-primario: #00e6e6; --color-secundario: #4BB543; --color-error: #ff5c5c;
            --color-fondo-oscuro: #0a0a1a; --color-texto-claro: #e0e0e0;
            --color-borde-card: rgba(0, 230, 230, 0.4);
            --fuente-titulo: 'Orbitron', sans-serif; --fuente-cuerpo: 'Share Tech Mono', monospace;
            --glow-color: #00e6e6;
        }

        html {
            box-sizing: border-box;
            font-size: 16px; 
        }

        *, *:before, *:after {
            box-sizing: inherit;
        }

        body { 
            font-family: var(--fuente-cuerpo);
            display: flex;
            justify-content: center;
            align-items: center; 
            min-height: 100vh;
            margin: 0;
            padding: 1rem;
            background-color: var(--color-fondo-oscuro);
            overflow: hidden;
            -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;
            color: var(--color-texto-claro);
            cursor: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'><path fill='%2300e6e6' d='M10 16v-4H6V8h4V4h4v4h4v4h-4v4h-4z'/></svg>") 12 12, auto;
        }

        #particle-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
        }
        
        .card-container {
            perspective: 1500px;
            transform-style: preserve-3d;
            width: 90%; /* Ajustado para el efecto "zoom out" */
            max-width: 550px;
        }

        .card { 
            background: rgba(10, 10, 26, 0.7);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--color-borde-card);
            border-radius: 20px;
            padding: clamp(1.5rem, 5vw, 3rem); 
            box-shadow: 0 15px 40px rgba(0,0,0,0.5), 0 0 40px var(--glow-color); 
            text-align: center;
            width: 100%;
            animation: fadeIn 1s ease-out 0.5s forwards;
            opacity: 0;
            transform-style: preserve-3d;
            transform: translateY(20px);
            color: var(--color-texto-claro);
            position: relative;
            overflow: hidden;
            transition: transform 0.1s ease-out, box-shadow 0.3s;
            overflow-wrap: break-word;
            -webkit-hyphens: auto;
            -ms-hyphens: auto;
            hyphens: auto;
        }
        
        @keyframes fadeIn {
            to { opacity: 1; transform: translateY(0); }
        }

        #puzzle-content, #success-content { display: none; }
        
        h1 {
            font-family: var(--fuente-titulo);
            color: white;
            font-size: clamp(2rem, 7vw, 2.8rem);
            margin: 0.4em 0;
            letter-spacing: clamp(1.5px, 0.5vw, 3px);
            text-shadow: 0 0 15px rgba(0,230,230,0.7);
        }

        p {
            font-size: clamp(1rem, 2.5vw, 1.15rem);
            line-height: 1.8;
            color: var(--color-texto-claro);
            margin-bottom: 1.5em;
        }

        h3 {
            font-size: clamp(1.5rem, 4vw, 1.8rem);
            color: var(--color-primario);
            margin-top: 1.5em;
            text-shadow: 0 0 8px rgba(0,230,230,0.4);
        }

        .icon {
            font-size: clamp(3rem, 10vw, 4rem);
            color: var(--color-primario);
            text-shadow: 0 0 20px var(--color-primario);
            margin-bottom: 0.3em;
        }

        .section-divider {
            width: 80%; height: 1px;
            background: linear-gradient(to right, transparent, var(--color-primario), transparent);
            margin: 2em auto; opacity: 0.5;
        }

        .challenge-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 2em;
            flex-wrap: wrap; 
        }

        .password-gate {
            display: flex;
            flex-direction: column; 
            align-items: center;
            gap: 1rem;
        }

        .challenge-buttons button, .puzzle-button { 
            border: 2px solid var(--color-primario);
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            color: var(--color-primario);
            background-color: transparent;
            padding: 0.8em 1.5em; 
            font-size: clamp(1rem, 2.5vw, 1.2rem);
            font-weight: bold;
            font-family: var(--fuente-cuerpo);
            box-shadow: 0 0 10px rgba(0, 230, 230, 0.3);
            flex-grow: 1; 
            max-width: 200px;
        }
        
        .puzzle-button {
            margin-top: 0.5em;
            width: 100%;
            max-width: 300px; 
            display: inline-flex;
            justify-content: center;
            align-items: center;
            gap: 0.5em;
        }

        .challenge-buttons button:hover, .puzzle-button:hover { 
            color: var(--color-fondo-oscuro);
            background-color: var(--color-primario);
            box-shadow: 0 0 25px var(--glow-color); 
            transform: translateY(-5px) scale(1.02); 
        }

        #yes-button, .puzzle-button {
            background-color: var(--color-primario);
            color: var(--color-fondo-oscuro);
        }

        #yes-button:hover, .puzzle-button:hover { background-color: white; }
        
        input { 
            padding: 15px;
            width: 100%;
            max-width: 300px; 
            border: 1px solid var(--color-primario);
            border-radius: 8px; 
            font-size: 1rem;
            background-color: rgba(0,0,0,0.6);
            color: white; 
            box-shadow: 0 0 8px rgba(0,230,230,0.4);
            font-family: var(--fuente-cuerpo);
        }

        input:focus {
            outline: none;
            border-color: white;
            box-shadow: 0 0 25px var(--color-primario);
        }
        
        #error-message {
            color: var(--color-error); font-weight: bold; margin-top: 15px; display: none;
            text-shadow: 0 0 8px rgba(255,92,92,0.5); font-size: 1.1em;
        }

        @keyframes shake {
            from, to { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
            20%, 40%, 60%, 80% { transform: translateX(10px); }
        }
        .shake { animation: shake 0.5s ease-in-out; }

    </style>
</head>
<body>
    <canvas id="particle-canvas"></canvas>
    
    <div class="card-container">
        <div class="card" id="card-pista">
            
            <div id="intro-screen">
                <span class="material-symbols-outlined icon">hub</span>
                <h1>Protocolo de Iniciación</h1>
                <p>Hola, <strong>Aranzza</strong>. El Agente <strong>Rafa</strong> te ha entregado este mensaje. Has sido seleccionada para un desafío personal de alto nivel.</p>
                <h3>¿Aceptas el desafío?</h3>
                <div class="challenge-buttons">
                    <button id="no-button" onclick="handleNoClick()">Rechazar</button>
                    <button id="yes-button" onclick="acceptChallenge()">Aceptar</button>
                </div>
            </div>

            <div id="puzzle-content">
                <span class="material-symbols-outlined icon">encrypted</span>
                <h1>Verificación de Identidad</h1>
                <div class="section-divider"></div>
                <p><strong>Clave de Acceso:</strong><br>¿En qué año William Henry Fox Talbot creó el calotipo?</p>
                <div class="password-gate">
                    <input type="text" id="password" placeholder="Introduce el código numérico...">
                    <button class="puzzle-button" onclick="verificarPassword('1841')">
                        <span>Verificar</span>
                        <span class="material-symbols-outlined">arrow_forward</span>
                    </button>
                    <p id="error-message">Acceso denegado. Código incorrecto.</p>
                </div>
            </div>

            <div id="success-content">
                <span class="material-symbols-outlined icon" style="color:var(--color-secundario); text-shadow: 0 0 10px var(--color-secundario);">verified_user</span>
                <h1>Acceso Concedido</h1>
                <p>Tu mente es capaz de procesar el desafío. Enhorabuena, Agente.</p>
                <p style="font-weight:bold; font-size:clamp(1.1rem, 3vw, 1.2rem); color: var(--color-primario); text-shadow: 0 0 10px var(--color-primario);">Tu primera coordenada te espera en el "Archivo Central" (Biblioteca). Procede con cautela.</p>
            </div>
        </div>
    </div>

    <script>
        // --- LÓGICA DE PARTÍCULAS DEL FONDO ---
        const canvas = document.getElementById('particle-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        let particlesArray = [];
        class Particle { constructor(x,y,dX,dY,s){this.x=x;this.y=y;this.directionX=dX;this.directionY=dY;this.size=s;} draw(){ctx.beginPath();ctx.arc(this.x,this.y,this.size,0,Math.PI*2,false);ctx.fillStyle='rgba(0,230,230,0.5)';ctx.fill();} update(){if(this.x>canvas.width||this.x<0){this.directionX=-this.directionX;} if(this.y>canvas.height||this.y<0){this.directionY=-this.directionY;} this.x+=this.directionX;this.y+=this.directionY;this.draw();}}
        function initParticles() { particlesArray = []; let n = (canvas.height*canvas.width)/9000; for (let i = 0; i < n; i++) { let s = (Math.random()*2)+1, x = Math.random()*(innerWidth-s*2)+s*2, y = Math.random()*(innerHeight-s*2)+s*2, dX = Math.random()*.4-.2, dY = Math.random()*.4-.2; particlesArray.push(new Particle(x,y,dX,dY,s)); } }
        function connectParticles() { let o=1; for(let a=0;a<particlesArray.length;a++){for(let b=a;b<particlesArray.length;b++){let d=((particlesArray[a].x-particlesArray[b].x)*(particlesArray[a].x-particlesArray[b].x))+((particlesArray[a].y-particlesArray[b].y)*(particlesArray[a].y-particlesArray[b].y)); if(d<(canvas.width/7)*(canvas.height/7)){o=1-(d/20000);ctx.strokeStyle=`rgba(0,230,230,${o})`;ctx.lineWidth=1;ctx.beginPath();ctx.moveTo(particlesArray[a].x,particlesArray[a].y);ctx.lineTo(particlesArray[b].x,particlesArray[b].y);ctx.stroke();}}}}
        function animateParticles() { requestAnimationFrame(animateParticles); ctx.clearRect(0,0,innerWidth,innerHeight); for(let i=0;i<particlesArray.length;i++){particlesArray[i].update();} connectParticles(); }
        initParticles(); animateParticles();
        window.addEventListener('resize', () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; initParticles(); });
        
        // --- LÓGICA DE LA INTERFAZ ---
        const introScreen = document.getElementById('intro-screen');
        const puzzleScreen = document.getElementById('puzzle-content');
        const successScreen = document.getElementById('success-content');

        let noClickCount = 0;
        const funnyNoMessages = ["¿Segura?", "Error de Sistema", "Anomalía detectada", "El protocolo requiere 'Aceptar'", "Operación no válida"];

        function handleNoClick() {
            noClickCount++;
            const yesButton = document.getElementById('yes-button');
            const noButton = document.getElementById('no-button');
            const currentScale = yesButton.style.transform ? parseFloat(yesButton.style.transform.match(/scale\(([^)]+)\)/)[1]) : 1;
            yesButton.style.transform = `scale(${currentScale + 0.2})`;
            noButton.textContent = funnyNoMessages[noClickCount % funnyNoMessages.length];
        }

        function acceptChallenge() {
            introScreen.style.display = 'none';
            puzzleScreen.style.display = 'block';
        }

        function verificarPassword(passwordCorrecta) {
            const input = document.getElementById('password'); 
            const errorMsg = document.getElementById('error-message');
            const inputUsuario = input.value.trim().toLowerCase();

            if (inputUsuario === passwordCorrecta) {
                puzzleScreen.style.display = 'none';
                successScreen.style.display = 'block';
            } else {
                errorMsg.style.display = 'block'; 
                input.classList.add('shake');
                setTimeout(() => { 
                    input.classList.remove('shake'); 
                    errorMsg.style.display = 'none';
                }, 1000);
            }
        }
    </script>
</body>
</html>
